// jquery-tablesort3s v1.0.0 | https://github.com/luciole75w/jquery-tablesort3s | MPL 2.0 licensed
!function(t){"use strict";function s(s,e){this.$row=t(s),this.$tbody=this.$row.parent(),this.fake=e?this.$row.is(e):this.$row.children().is(function(){return this.colSpan>1}),this.rank=s.rowIndex,this.fake?this.fakeKey={text:"#"+this.rank,num:this.rank}:this.keys=this.parse()}function e(e,n){this.headerCells=e.tHead.rows[n.headerRow||0].cells,this.source=t.map(e.tBodies[0].rows,function(t){return new s(t,n.fakeFilter)}),this.hinter=n.hints?function(){return n.hints[2*t(this).hasClass("sort-on")+!t(this).hasClass("sort-asc")]}:"",(this.source.length>1||n.forceUI)&&this.bindWidgets(this,n.noSortFilter,n.hints,n.widgetClass)}t.fn.extend({tablesort3s:function(s,n){return this.filter("table").each(function(){var r=t(this).data("tablesort3s");r||t(this).data("tablesort3s",r=new e(this,"object"==typeof s?s:{})),("number"==typeof s||s===!1)&&r.sort(s,n)})}}),s.prototype={updateDOM:function(t){this.fake&&t?this.$row.detach():this.$row.appendTo(this.$tbody)},parse:function(){return t.map(this.$row.prop("cells"),function(s){var e=t(s).text().toLowerCase(),n=/^[+-]?\d+(?:\.\d+)?/.exec(e);return{text:e,num:null!==n?Number(n[0]):null}})}},s.comparator=function(t,s){return t===!1?function(t,s){return t.rank-s.rank}:function(e,n){var r,i=e.fake?e.fakeKey:e.keys[t],o=n.fake?n.fakeKey:n.keys[t];if(i.num!==o.num)r=null!==i.num?null!==o.num?i.num-o.num:1:-1;else if(i.text<o.text)r=-1;else{if(!(i.text>o.text))return e.rank-n.rank;r=1}return s?r:-r}},e.prototype={bindWidgets:function(s,e,n,r){t(this.headerCells).not(e?e:".nosort").each(function(e,i){var o=t("<div>").addClass(r||"sort").append(t("<div>").addClass("sort-asc").text(n?n[0]:"+")).append(t("<div>").addClass("sort-desc").text(n?n[1]:"-"));o.children().click(function(){s.sort(t(this).hasClass("sort-on")?!1:i.cellIndex,t(this).hasClass("sort-asc"))}).keyup(function(t){13==t.which&&this.click()}).attr({tabindex:0,title:s.hinter}),o.appendTo(this)})},sort:function(e,n){t(".sort-on",this.headerCells).removeClass("sort-on").attr("title",this.hinter),e!==!1&&t(n?".sort-asc":".sort-desc",this.headerCells[e]).addClass("sort-on").attr("title",this.hinter),this.source.sort(s.comparator(e,n)),t.each(this.source,function(){this.updateDOM(e!==!1)})}}}(jQuery);